<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Live Water & CKD Monitor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #e6f7ff;
      --card-bg: #ffffff;
      --primary: #1f8fff;
      --primary-dark: #1172d0;
      --accent: #ff6f91;
      --text-main: #102a43;
      --text-muted: #7b8794;
      --radius: 20px;
      --shadow: 0 18px 40px rgba(15, 52, 96, 0.18);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 2rem 1rem;
      background: radial-gradient(circle at top, #f5fbff 0, #cfe9ff 40%, #b0ddff 100%);
      font-family: "Poppins", sans-serif;
      color: var(--text-main);
    }

    .shell {
      width: 100%;
      max-width: 1100px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 1.5rem;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.8rem 2rem;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at top left, rgba(31, 143, 255, 0.18), transparent 60%),
        radial-gradient(circle at bottom right, rgba(255, 111, 145, 0.18), transparent 60%);
      opacity: 0.8;
      pointer-events: none;
    }

    .card-inner { position: relative; z-index: 1; }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.4rem;
      color: var(--primary-dark);
    }

    .subtitle {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 1.4rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      padding: 0.6rem 1.4rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      box-shadow: 0 12px 26px rgba(31, 143, 255, 0.4);
    }

    .btn-primary:hover { filter: brightness(1.05); }

    .btn-outline {
      background: rgba(255, 255, 255, 0.7);
      color: var(--primary-dark);
      border: 1px solid rgba(148, 180, 235, 0.8);
    }

    .section-title {
      font-size: 1.15rem;
      font-weight: 600;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #e6fffa;
      color: #038c73;
      margin-bottom: 0.6rem;
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #00c7b7;
    }

    /* Form styling */
    form label {
      display: block;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.2rem;
      margin-top: 0.45rem;
    }

    form input, form select {
      width: 100%;
      padding: 0.45rem 0.6rem;
      border-radius: 10px;
      border: 1px solid #ccd7e6;
      font-size: 0.85rem;
      outline: none;
    }

    form input:focus, form select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(31, 143, 255, 0.18);
    }

    #result {
      margin-top: 0.9rem;
      font-weight: 600;
      font-size: 0.95rem;
    }

    #result.ckd { color: #d64545; }
    #result.notckd { color: #038c73; }

    @media (max-width: 900px) {
      .shell { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="shell">

    <!-- Left card: water dashboard -->
    <div class="card">
      <div class="card-inner">
        <h1>Live Water Quality Monitoring</h1>
        <p class="subtitle">
          Real‚Äëtime overview of water parameters and health‚Äërisk prediction in one smart panel.
        </p>

        <div class="pill">
          <span class="pill-dot"></span>
          Demo mode ¬∑ Sensor data not connected
        </div>

        <!-- your chart / UI can go here later -->
        <p style="font-size:0.85rem;color:#7b8794;margin:1rem 0 1.4rem;">
          Add your live chart component here (temperature, TDS, conductivity, turbidity).
        </p>

        <button class="btn btn-primary" onclick="window.location.href='report.html'">
          üìä View Detailed Data / Report
        </button>
      </div>
    </div>

    <!-- Right card: CKD prediction -->
    <div class="card">
      <div class="card-inner">
        <div class="section-title">
          <span style="width:10px;height:10px;border-radius:50%;background:var(--accent);"></span>
          Kidney Disease Prediction
        </div>
        <p class="subtitle" style="margin-bottom:0.8rem;">
          Enter patient values to estimate chronic kidney disease risk with the trained model.
        </p>

        <form id="ckdForm">
          <label>Age</label>
          <input type="number" name="age" step="0.1" required>

          <label>Blood Pressure (BP)</label>
          <input type="number" name="bp" step="0.1" required>

          <label>Specific Gravity (SG)</label>
          <input type="number" name="sg" step="0.001" required>

          <label>Albumin (AL)</label>
          <input type="number" name="al" step="0.1" required>

          <label>Sugar (SU)</label>
          <input type="number" name="su" step="0.1" required>

          <label>Hypertension (htn)</label>
          <select name="htn">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>

          <label>Diabetes (dm)</label>
          <select name="dm">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>

          <button type="submit" class="btn btn-outline" style="margin-top:0.9rem;">
            üîç Predict CKD
          </button>
        </form>

        <p id="result"></p>
      </div>
    </div>

  </div>

  <script>
document.getElementById("ckdForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = e.target;
  const data = {
    age: parseFloat(form.age.value),
    bp: parseFloat(form.bp.value),
    sg: parseFloat(form.sg.value),
    al: parseFloat(form.al.value),
    su: parseFloat(form.su.value),
    rbc: "normal",
    pc: "normal",
    pcc: "notpresent",
    ba: "notpresent",
    bgr: 120,
    bu: 30,
    sc: 1.2,
    sod: 135,
    pot: 4.5,
    hemo: 14,
    pcv: "40",
    wc: "8000",
    rc: "4.5",
    htn: form.htn.value,
    dm: form.dm.value,
    cad: "no",
    appet: "good",
    pe: "no",
    ane: "no",
  };

  try {
    const res = await fetch("http://127.0.0.1:5000/predict", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const json = await res.json();
    const el = document.getElementById("result");
    el.textContent = "Predicted class: " + json.prediction;
    el.className = json.prediction === "ckd" ? "ckd" : "notckd";
  } catch (err) {
    document.getElementById("result").textContent =
      "Error contacting prediction server.";
  }
});
</script>

</body>
</html>
